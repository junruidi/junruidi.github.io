quantile(surv$age,probs = seq(0,1,1/3))
surv$agegroup = NA
surv$agegroup[which(surv$age<60 &surv$age>=50)] = "a: 50-60"
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv$agegroup = NA
surv$agegroup[which(surv$age<60 &surv$age>=50)] = "a: 50-60"
surv$agegroup[which(surv$age<70 &surv$age>=60)] = "b: 60-70"
surv$agegroup[which(surv$age>=70)] = "c:>=70"
View(surv)
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv$group = NA
surv$agegroup[which(surv$age<60 &surv$age>=50 & surv$Male == 1)] = "m: 50-60"
surv$agegroup[which(surv$age<60 &surv$age>=50 & surv$Male == 0)] = "f: 50-60"
surv$agegroup[which(surv$age<70 &surv$age>=60 & surv$Male == 1)] = "m: 60-70"
surv$agegroup[which(surv$age<70 &surv$age>=60 & surv$Male == 0)] = "f: 60-70"
surv$agegroup[which(surv$age>=70 & surv$Male == 1)] = "m:>=70"
surv$agegroup[which(surv$age>=70 & surv$Male == 0)] = "f:>=70"
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv$group = NA
surv$group[which(surv$age<60 &surv$age>=50 & surv$Male == 1)] = "m: 50-60"
surv$group[which(surv$age<60 &surv$age>=50 & surv$Male == 0)] = "f: 50-60"
surv$group[which(surv$age<70 &surv$age>=60 & surv$Male == 1)] = "m: 60-70"
surv$group[which(surv$age<70 &surv$age>=60 & surv$Male == 0)] = "f: 60-70"
surv$group[which(surv$age>=70 & surv$Male == 1)] = "m:>=70"
surv$group[which(surv$age>=70 & surv$Male == 0)] = "f:>=70"
table(surv$group)
523+616+571+493+576+649
avewear = surv$aveact + surv$avesed
boxplot(avewear ~ surv$group)
plot(density(avewear[which(surv$group == "m: 50-60")]))
lines(density(avewear[which(surv$group == "m: 50-60")]),col = 1)
plot(density(avewear[which(surv$group == "m: 50-60")]))
lines(density(avewear[which(surv$group == "f: 50-60")]),col = 1)
plot(density(avewear[which(surv$group == "m: 50-60")]))
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m: 70+")])col = "green")
lines(density(avewear[which(surv$group == "f: 70+")]),col = "green",lty = 2)
max(density(avewear))
plot(density(avewear[which(surv$group == "m: 50-60")]),ylim = c(0,0.0045))
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m: >=70")])col = "green")
lines(density(avewear[which(surv$group == "f: >=70")]),col = "green",lty = 2)
plot(density(avewear[which(surv$group == "m: 50-60")]),ylim = c(0,0.0045))
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m: >=70")]),col = "green")
lines(density(avewear[which(surv$group == "f: >=70")]),col = "green",lty = 2)
plot(density(avewear[which(surv$group == "m: 50-60")]),ylim = c(0,0.0045))
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m:>=70")]),col = "green")
lines(density(avewear[which(surv$group == "f:>=70")]),col = "green",lty = 2)
plot(density(avewear[which(surv$group == "m: 50-60")]),ylim = c(0,0.0045),
xlab = "Wear Time",main = "")
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m:>=70")]),col = "green")
lines(density(avewear[which(surv$group == "f:>=70")]),col = "green",lty = 2)
legend("topright",horiz = T,legend = c("F","M"),lty = c(1,2))
plot(density(avewear[which(surv$group == "m: 50-60")]),ylim = c(0,0.0045),
xlab = "Wear Time",main = "")
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m:>=70")]),col = "green")
lines(density(avewear[which(surv$group == "f:>=70")]),col = "green",lty = 2)
legend("topright",horiz = T,legend = c("F","M"),lty = c(1,2),border = F)
plot(density(avewear[which(surv$group == "m: 50-60")]),ylim = c(0,0.0045),
xlab = "Wear Time",main = "")
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m:>=70")]),col = "green")
lines(density(avewear[which(surv$group == "f:>=70")]),col = "green",lty = 2)
legend("topright",horiz = T,legend = c("F","M"),lty = c(1,2),border = "n")
?legend
plot(density(avewear[which(surv$group == "m: 50-60")]),ylim = c(0,0.0045),
xlab = "Wear Time",main = "")
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m:>=70")]),col = "green")
lines(density(avewear[which(surv$group == "f:>=70")]),col = "green",lty = 2)
legend("topright",horiz = T,legend = c("F","M"),lty = c(1,2),box = "n")
legend("topright",horiz = T,legend = c("F","M"),lty = c(1,2),box = F)
plot(density(avewear[which(surv$group == "m: 50-60")]),ylim = c(0,0.0045),
xlab = "Wear Time",main = "")
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m:>=70")]),col = "green")
lines(density(avewear[which(surv$group == "f:>=70")]),col = "green",lty = 2)
legend("topright",horiz = T,legend = c("F","M"),lty = c(1,2))
plot(density(avewear[which(surv$group == "m: 50-60")]),ylim = c(0,0.0045),
xlab = "Wear Time",main = "")
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m:>=70")]),col = "blue")
lines(density(avewear[which(surv$group == "f:>=70")]),col = "blue",lty = 2)
legend("topright",horiz = T,legend = c("F","M"),lty = c(1,2))
#wear time analysis
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/act.rda")
wear1 = wear
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10to20hour/act.rda")
wear2 = wear
idcheck1 = paste(wear1$SEQN,wear1$PAXDAY,sep = "-")
idcheck2 = paste(wear2$SEQN,wear2$PAXDAY,sep = "-")
dif = setdiff(idcheck1, idcheck2)
dif.ind = which(idcheck1 %in% dif)
weargreater = wear1[dif.ind,]
wt = weargreater[,-c(1:2)]
x = rowSums(wt)
hist(x, xlab = "Wear Time",main = "Wear Time")
setdiff(unique(wear1$SEQN),unique(wear2$SEQN))
different.sub = setdiff(unique(wear1$SEQN),unique(wear2$SEQN))
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv1 = na.omit(surv)
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10to20hour/surv.rda")
surv2 = na.omit(surv)
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10to20hour/surv.rda")
########################################
##           Survival Model           ##
##              08/20/2017            ##
########################################
####################################
#original analysis
####################################
# 1. load in data ---------------------------------------------------------
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
library(survey)
library(survival)
library(simPH)
library(nhanesaccel)
#surv = surv[-which(surv$SEQN == 37667),]
surv$include = 1
surv = subset(surv,select = -c(RIDAGEMN,RIAGENDR,RIDRETH1,DMDEDUC,DIQ010,MCQ160B,MCQ160C,MCQ160F,MCQ220,SMQ020,Alcohol,DrinksPerWeek,
DrinksPerWeek,DrinkStatus, SmokeCigs))
#check for missing
for(i in 1:ncol(surv)){
print(names(surv)[i])
print(sum(is.na(surv[,i])))
}
#28 missing BMI
# 2. Remove missing values and create first survey object -----------------
survv = na.omit(surv)
########################################
##           Survival Model           ##
##              08/20/2017            ##
########################################
####################################
#original analysis
####################################
# 1. load in data ---------------------------------------------------------
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
library(survey)
library(survival)
library(simPH)
library(nhanesaccel)
#surv = surv[-which(surv$SEQN == 37667),]
surv$include = 1
surv = subset(surv,select = -c(RIDAGEMN,RIAGENDR,RIDRETH1,DMDEDUC,DIQ010,MCQ160B,MCQ160C,MCQ160F,MCQ220,SMQ020,Alcohol,DrinksPerWeek,
DrinksPerWeek,DrinkStatus, SmokeCigs))
#check for missing
for(i in 1:ncol(surv)){
print(names(surv)[i])
print(sum(is.na(surv[,i])))
}
#28 missing BMI
# 2. Remove missing values and create first survey object -----------------
survv = na.omit(surv)
########################################
##           Survival Model           ##
##              08/20/2017            ##
########################################
####################################
#original analysis
####################################
# 1. load in data ---------------------------------------------------------
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10to20hour/surv.rda")
library(survey)
library(survival)
library(simPH)
library(nhanesaccel)
#surv = surv[-which(surv$SEQN == 37667),]
surv$include = 1
surv = subset(surv,select = -c(RIDAGEMN,RIAGENDR,RIDRETH1,DMDEDUC,DIQ010,MCQ160B,MCQ160C,MCQ160F,MCQ220,SMQ020,Alcohol,DrinksPerWeek,
DrinksPerWeek,DrinkStatus, SmokeCigs))
#check for missing
for(i in 1:ncol(surv)){
print(names(surv)[i])
print(sum(is.na(surv[,i])))
}
#28 missing BMI
# 2. Remove missing values and create first survey object -----------------
survv = na.omit(surv)
legend("topleft",legend = c("50-60","60-70","70+"),pch = 19,col = c("black","red","blue"))
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv$group = NA
surv$group[which(surv$age<60 &surv$age>=50 & surv$Male == 1)] = "m: 50-60"
surv$group[which(surv$age<60 &surv$age>=50 & surv$Male == 0)] = "f: 50-60"
surv$group[which(surv$age<70 &surv$age>=60 & surv$Male == 1)] = "m: 60-70"
surv$group[which(surv$age<70 &surv$age>=60 & surv$Male == 0)] = "f: 60-70"
surv$group[which(surv$age>=70 & surv$Male == 1)] = "m:>=70"
surv$group[which(surv$age>=70 & surv$Male == 0)] = "f:>=70"
avewear = surv$aveact + surv$avesed
boxplot(avewear ~ surv$group)
plot(density(avewear[which(surv$group == "m: 50-60")]),ylim = c(0,0.0045),
xlab = "Wear Time",main = "")
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m:>=70")]),col = "blue")
lines(density(avewear[which(surv$group == "f:>=70")]),col = "blue",lty = 2)
legend("topright",horiz = T,legend = c("F","M"),lty = c(1,2))
legend("topleft",legend = c("50-60","60-70","70+"),pch = 19,col = c("black","red","blue"))
##############################
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv = subset(surv,select = -c(RIDAGEMN,RIAGENDR,RIDRETH1,DMDEDUC,DIQ010,MCQ160B,MCQ160C,MCQ160F,MCQ220,SMQ020,Alcohol,DrinksPerWeek,
DrinksPerWeek,DrinkStatus, SmokeCigs))
survv = na.omit(surv)
id = survv$SEQN
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv = subset(surv,select = -c(RIDAGEMN,RIAGENDR,RIDRETH1,DMDEDUC,DIQ010,MCQ160B,MCQ160C,MCQ160F,MCQ220,SMQ020,Alcohol,DrinksPerWeek,
DrinksPerWeek,DrinkStatus, SmokeCigs))
survv = na.omit(surv)
id = survv$SEQN
#wear time analysis
#rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/act.rda")
wear1 = wear
wear1 = subset(wear1, SEQN %in% id)
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10to20hour/act.rda")
wear2 = wear
wear2 = subset(wear2, SEQN %in% id)
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv = subset(surv,select = -c(RIDAGEMN,RIAGENDR,RIDRETH1,DMDEDUC,DIQ010,MCQ160B,MCQ160C,MCQ160F,MCQ220,SMQ020,Alcohol,DrinksPerWeek,
DrinksPerWeek,DrinkStatus, SmokeCigs))
survv = na.omit(surv)
id = survv$SEQN
#wear time analysis
#rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/act.rda")
wear1 = wear
wear1 = subset(wear1, SEQN %in% id)
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10to20hour/act.rda")
wear2 = wear
wear2 = subset(wear2, SEQN %in% id)
length(unique(wear1$SEQN))
length(unique(wear2$SEQN))
nrow(wear1) - nrow(wear2)
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv = subset(surv,select = -c(RIDAGEMN,RIAGENDR,RIDRETH1,DMDEDUC,DIQ010,MCQ160B,MCQ160C,MCQ160F,MCQ220,SMQ020,Alcohol,DrinksPerWeek,
DrinksPerWeek,DrinkStatus, SmokeCigs))
survv = na.omit(surv)
id = survv$SEQN
#wear time analysis
#rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/act.rda")
wear1 = wear
wear1 = subset(wear1, SEQN %in% id)
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10to20hour/act.rda")
wear2 = wear
wear2 = subset(wear2, SEQN %in% id)
nrow(wear1) - nrow(wear2)
#1233
idcheck1 = paste(wear1$SEQN,wear1$PAXDAY,sep = "-")
idcheck2 = paste(wear2$SEQN,wear2$PAXDAY,sep = "-")
dif = setdiff(idcheck1, idcheck2)
dif.ind = which(idcheck1 %in% dif)
weargreater = wear1[dif.ind,]
wt = weargreater[,-c(1:2)]
x = rowSums(wt)
hist(x, xlab = "Wear Time",main = "Wear Time")
different.sub = setdiff(unique(wear1$SEQN),unique(wear2$SEQN))
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv$group = NA
surv$group[which(surv$age<60 &surv$age>=50 & surv$Male == 1)] = "m: 50-60"
surv$group[which(surv$age<60 &surv$age>=50 & surv$Male == 0)] = "f: 50-60"
surv$group[which(surv$age<70 &surv$age>=60 & surv$Male == 1)] = "m: 60-70"
surv$group[which(surv$age<70 &surv$age>=60 & surv$Male == 0)] = "f: 60-70"
surv$group[which(surv$age>=70 & surv$Male == 1)] = "m:>=70"
surv$group[which(surv$age>=70 & surv$Male == 0)] = "f:>=70"
avewear = surv$aveact + surv$avesed
boxplot(avewear ~ surv$group)
plot(density(avewear[which(surv$group == "m: 50-60")]),ylim = c(0,0.0045),
xlab = "Wear Time",main = "")
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m:>=70")]),col = "blue")
lines(density(avewear[which(surv$group == "f:>=70")]),col = "blue",lty = 2)
legend("topright",horiz = T,legend = c("F","M"),lty = c(1,2))
legend("topleft",legend = c("50-60","60-70","70+"),pch = 19,col = c("black","red","blue"))
##############################
1000/60
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv = subset(surv,select = -c(RIDAGEMN,RIAGENDR,RIDRETH1,DMDEDUC,DIQ010,MCQ160B,MCQ160C,MCQ160F,MCQ220,SMQ020,Alcohol,DrinksPerWeek,
DrinksPerWeek,DrinkStatus, SmokeCigs))
survv = na.omit(surv)
id = survv$SEQN
#wear time analysis
#rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/act.rda")
wear1 = wear
wear1 = subset(wear1, SEQN %in% id)
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10to20hour/act.rda")
wear2 = wear
wear2 = subset(wear2, SEQN %in% id)
nrow(wear1) - nrow(wear2)
#1233
idcheck1 = paste(wear1$SEQN,wear1$PAXDAY,sep = "-")
idcheck2 = paste(wear2$SEQN,wear2$PAXDAY,sep = "-")
dif = setdiff(idcheck1, idcheck2)
dif.ind = which(idcheck1 %in% dif)
weargreater = wear1[dif.ind,]
wt = weargreater[,-c(1:2)]
x = rowSums(wt)
hist(x, xlab = "Wear Time",main = "Wear Time")
different.sub = setdiff(unique(wear1$SEQN),unique(wear2$SEQN))
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv = subset(surv,select = -c(RIDAGEMN,RIAGENDR,RIDRETH1,DMDEDUC,DIQ010,MCQ160B,MCQ160C,MCQ160F,MCQ220,SMQ020,Alcohol,DrinksPerWeek,
DrinksPerWeek,DrinkStatus, SmokeCigs))
survv = na.omit(surv)
id = survv$SEQN
#wear time analysis
#rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/act.rda")
wear1 = wear
wear1 = subset(wear1, SEQN %in% id)
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10to20hour/act.rda")
wear2 = wear
wear2 = subset(wear2, SEQN %in% id)
nrow(wear1) - nrow(wear2)
#1233
idcheck1 = paste(wear1$SEQN,wear1$PAXDAY,sep = "-")
idcheck2 = paste(wear2$SEQN,wear2$PAXDAY,sep = "-")
dif = setdiff(idcheck1, idcheck2)
dif.ind = which(idcheck1 %in% dif)
weargreater = wear1[dif.ind,]
wt = weargreater[,-c(1:2)]
View(wt)
x = rowSums(wt)
x
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv = subset(surv,select = -c(RIDAGEMN,RIAGENDR,RIDRETH1,DMDEDUC,DIQ010,MCQ160B,MCQ160C,MCQ160F,MCQ220,SMQ020,Alcohol,DrinksPerWeek,
DrinksPerWeek,DrinkStatus, SmokeCigs))
survv = na.omit(surv)
id = survv$SEQN
#wear time analysis
#rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/act.rda")
wear1 = wear
wear1 = subset(wear1, SEQN %in% id)
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10to20hour/act.rda")
wear2 = wear
wear2 = subset(wear2, SEQN %in% id)
nrow(wear1) - nrow(wear2)
#1233
idcheck1 = paste(wear1$SEQN,wear1$PAXDAY,sep = "-")
idcheck2 = paste(wear2$SEQN,wear2$PAXDAY,sep = "-")
dif = setdiff(idcheck1, idcheck2)
dif.ind = which(idcheck1 %in% dif)
weargreater = wear1[dif.ind,]
wt = weargreater[,-c(1:2)]
x = rowSums(wt)
hist(x, xlab = "Wear Time",main = "Wear Time")
different.sub = setdiff(unique(wear1$SEQN),unique(wear2$SEQN))
#################################
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv$group = NA
surv$group[which(surv$age<60 &surv$age>=50 & surv$Male == 1)] = "m: 50-60"
surv$group[which(surv$age<60 &surv$age>=50 & surv$Male == 0)] = "f: 50-60"
surv$group[which(surv$age<70 &surv$age>=60 & surv$Male == 1)] = "m: 60-70"
surv$group[which(surv$age<70 &surv$age>=60 & surv$Male == 0)] = "f: 60-70"
surv$group[which(surv$age>=70 & surv$Male == 1)] = "m:>=70"
surv$group[which(surv$age>=70 & surv$Male == 0)] = "f:>=70"
avewear = surv$aveact + surv$avesed
boxplot(avewear ~ surv$group)
plot(density(avewear[which(surv$group == "m: 50-60")]),ylim = c(0,0.0045),
xlab = "Wear Time",main = "")
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m:>=70")]),col = "blue")
lines(density(avewear[which(surv$group == "f:>=70")]),col = "blue",lty = 2)
legend("topright",horiz = T,legend = c("F","M"),lty = c(1,2))
legend("topleft",legend = c("50-60","60-70","70+"),pch = 19,col = c("black","red","blue"))
##############################
rm(list = ls())
load("~/Dropbox/Junrui Di/fragmentation/Review AJE/aggregate2/data/10hour/surv.rda")
surv$group = NA
surv$group[which(surv$age<60 &surv$age>=50 & surv$Male == 1)] = "m: 50-60"
surv$group[which(surv$age<60 &surv$age>=50 & surv$Male == 0)] = "f: 50-60"
surv$group[which(surv$age<70 &surv$age>=60 & surv$Male == 1)] = "m: 60-70"
surv$group[which(surv$age<70 &surv$age>=60 & surv$Male == 0)] = "f: 60-70"
surv$group[which(surv$age>=70 & surv$Male == 1)] = "m:>=70"
surv$group[which(surv$age>=70 & surv$Male == 0)] = "f:>=70"
avewear = surv$aveact + surv$avesed
boxplot(avewear ~ surv$group)
plot(density(avewear[which(surv$group == "m: 50-60")]),ylim = c(0,0.0045),
xlab = "Wear Time",main = "")
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m:>=70")]),col = "blue")
lines(density(avewear[which(surv$group == "f:>=70")]),col = "blue",lty = 2)
legend("topright",horiz = T,legend = c("F","M"),lty = c(1,2))
legend("topleft",legend = c("50-60","60-70","70+"),pch = 19,col = c("black","red","blue"))
##############################
plot(density(avewear[which(surv$group == "m: 50-60")]),ylim = c(0,0.0045),
xlab = "Wear Time",main = "")
lines(density(avewear[which(surv$group == "f: 50-60")]),lty = 2)
lines(density(avewear[which(surv$group == "m: 60-70")]),col = "red")
lines(density(avewear[which(surv$group == "f: 60-70")]),col = "red",lty = 2)
lines(density(avewear[which(surv$group == "m:>=70")]),col = "blue")
lines(density(avewear[which(surv$group == "f:>=70")]),col = "blue",lty = 2)
legend("topright",horiz = T,legend = c("F","M"),lty = c(2,1))
legend("topleft",legend = c("50-60","60-70","70+"),pch = 19,col = c("black","red","blue"))
##############################
install.packages(c("BH", "fda", "httr", "knitr", "Matrix", "plotrix", "RcppArmadillo", "rlang", "scales", "shiny", "tensorBSS", "tibble", "tsBSS"))
dfadfas
q(0)
q()
dfadfas
rnorm(5)
rnorm(5)
rnorm(5)
rnorm(5)
head(iris)
head(matcars)
head(mtcars)
mydata = iris[,c(1:4)]
mypca = prcomp(mydata, center = T,scale. = F)
biplot(mypca)
rot = mypca$rotation
rot
rot.varmax = varimax(rot)
rot.varmax
?varimax
x = rot.varmax$loadings
x
ls(x)
x
t(x) %*% x
q = rot.varmax$rotmat
q
t(q) %*% q
?Varimax
?varimax
rot.varmax = varimax(rot[,c(1:3)])
rot.varmax
t(rot.varmax$loadings) %*% rot.varmax$loadings
xx = as.matrix(rot.varmax$loadings)
xx
xx[.1]
xx[,11]
xx[,1]
sqrt(sum(xx[,1]^2))
?prcomp
pca_iris        <- prcomp(irisX, center=T, scale=T)
rawLoadings     <- pca_iris$rotation[,1:ncomp] %*% diag(pca_iris$sdev, ncomp, ncomp)
rotatedLoadings <- varimax(rawLoadings)$loadings
pca_iris        <- prcomp(iris[,c(1:4)], center=T, scale. = F)
rawLoadings     <- pca_iris$rotation[,1:ncomp] %*% diag(pca_iris$sdev, ncomp, ncomp)
rotatedLoadings <- varimax(rawLoadings)$loadings
ncomp = 3
pca_iris        <- prcomp(iris[,c(1:4)], center=T, scale. = F)
rawLoadings     <- pca_iris$rotation[,1:ncomp] %*% diag(pca_iris$sdev, ncomp, ncomp)
rotatedLoadings <- varimax(rawLoadings)$loadings
rotatedLoadings
t(rotatedLoadings) %*% rotatedLoadings
t(rawLoadings) %*% rawLoadings
x = varimax(pca_iris$rotation)
x
x = varimax(pca_iris$rotation[,c(1:3)])
x
t(x$loadings) %*% x$loadings''
t(x$loadings) %*% x$loadings
ncomp = 3
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("~/Dropbox/web/junruidi.github.io/")
#render your sweet site.
rmarkdown::render_site()
# git add -A
