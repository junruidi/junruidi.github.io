rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt)) %>%
group_by(ID,datetime) %>% summarise(Activity = sum(activity,na.rm = T)) %>%
mutate(Date = as_date(epochdt),
Day = Date - min(Date) + 1,
Time = substr(epochdt,12,19))
rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt))
rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt)) %>%
group_by(ID,datetime) %>% summarise(Activity = sum(activity,na.rm = T)) %
rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt)) %>%
group_by(ID,datetime) %>% summarise(Activity = sum(activity,na.rm = T))
rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt)) %>%
group_by(ID,datetime) %>% summarise(Activity = sum(activity,na.rm = T)) %>%
mutate(Date = as_date(datetime),
Day = Date - min(Date) + 1,
Time = substr(epochdt,12,19))
rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt)) %>%
group_by(ID,datetime) %>% summarise(Activity = sum(activity,na.rm = T))
View(data)
rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt)) %>%
group_by(ID,datetime) %>% summarise(Activity = sum(activity,na.rm = T)) %>%
mutate(Date = as_date(datetime),
Day = Date - min(Date) + 1,
Time = substr(epochdt,12,19))
rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt)) %>%
group_by(ID,datetime) %>% summarise(Activity = sum(activity,na.rm = T)) %>%
mutate(Date = as_date(datetime),
Day = Date - min(Date) + 1,
Time = substr(datetime,12,19)) %>%
ungroup() %>%
select(ID,Day,Time,Activity,datetime,Date)
rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt)) %>%
group_by(ID,datetime) %>% summarise(Activity = sum(activity,na.rm = T)) %>%
mutate(Date = as_date(datetime),
Day = Date - min(Date) + 1,
Time = substr(datetime,12,19)) %>%
ungroup() %>%
select(ID,Day,Time,Activity,datetime,Date)
i =1
k = 1
id.i = idlist[i]
dat.i = data %>% filter(ID == id.i) %>% select(-ID)
g = factor(dat.i$Day,levels = as.character(unique(dat.i$Day)))
dat.list = split(dat.i, g)
act = tibble()
rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt)) %>%
group_by(ID,datetime) %>% summarise(Activity = sum(activity,na.rm = T)) %>%
mutate(Date = as_date(datetime),
Day = Date - min(Date) + 1,
Time = substr(datetime,12,19)) %>%
ungroup() %>%
select(ID,Day,Time,Activity,datetime,Date)
idlist = unique(data$ID)
Activit_Data_Wide = tibble()
i = 1
k = 1
id.i = idlist[i]
dat.i = data %>% filter(ID == id.i) %>% select(-ID)
g = factor(dat.i$Day,levels = as.character(unique(dat.i$Day)))
dat.list = split(dat.i, g)
act = tibble()
mat = dat.list[[k]]
print(k)
dt=unique(mat$Day)
dte = unique(mat$Date)
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)),datetime = rep(NA, 1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(new.mat,mat)
mat
rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt)) %>%
group_by(ID,datetime) %>% summarise(Activity = sum(activity,na.rm = T)) %>%
mutate(Date = as_date(datetime),
Day = Date - min(Date) + 1,
Time = substr(datetime,12,19)) %>%
ungroup() %>%
select(ID,Day,Time,Activity,datetime,Date)
idlist = unique(data$ID)
Activit_Data_Wide = tibble()
for(i in 1:length(idlist)){
id.i = idlist[i]
dat.i = data %>% filter(ID == id.i) %>% select(-ID)
g = factor(dat.i$Day,levels = as.character(unique(dat.i$Day)))
dat.list = split(dat.i, g)
act = tibble()
for ( k in 1: length(dat.list)){
mat = dat.list[[k]]
print(k)
dt=unique(mat$Day)
dte = unique(mat$Date)
if(nrow(mat) != 1440) {
if(mat$Time[nrow(mat)]=="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)),datetime = rep(NA, 1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(new.mat,mat)
}
if(mat$Time[nrow(mat)]!="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)), datetime = rep(NA,1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(mat,new.mat)
}
}
acti = mat
act = rbind(act,acti)
}
Activit_Data_Wide = rbind(Activit_Data_Wide,act)
}
View(Activit_Data_Wide)
rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt)) %>%
group_by(ID,datetime) %>% summarise(Activity = sum(activity,na.rm = T)) %>%
mutate(Date = as_date(datetime),
Day = Date - min(Date) + 1,
Time = substr(datetime,12,19)) %>%
ungroup() %>%
select(ID,Day,Time,Activity,datetime,Date)
idlist = unique(data$ID)
Activit_Data_Wide = tibble()
for(i in 1:length(idlist)){
id.i = idlist[i]
dat.i = data %>% filter(ID == id.i) %>% select(-ID)
g = factor(dat.i$Day,levels = as.character(unique(dat.i$Day)))
dat.list = split(dat.i, g)
act = tibble()
for ( k in 1: length(dat.list)){
mat = dat.list[[k]]
print(k)
dt=unique(mat$Day)
dte = unique(mat$Date)
if(nrow(mat) != 1440) {
if(mat$Time[nrow(mat)]=="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)),datetime = rep(NA, 1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(new.mat,mat)
}
if(mat$Time[nrow(mat)]!="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)), datetime = rep(NA,1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(mat,new.mat)
}
}
acti = mat
act = rbind(act,acti)
}
n.day = length(dat.list)
act = as_tibble(matrix(act$Activity,ncol = 1440,byrow = T))
names(act) = c(paste0("MIN",c(1:1440)))
act = act %>% mutate(ID = id.i,
Date = as.character(date.start.i+c(0:(n.day-1))))
act$Seq = (1:nrow(act))
act = act[,c(1441:1443,1:1440)]
Activit_Data_Wide = rbind(Activit_Data_Wide,act)
}
i = 1
rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt)) %>%
group_by(ID,datetime) %>% summarise(Activity = sum(activity,na.rm = T)) %>%
mutate(Date = as_date(datetime),
Day = Date - min(Date) + 1,
Time = substr(datetime,12,19)) %>%
ungroup() %>%
select(ID,Day,Time,Activity,datetime,Date)
idlist = unique(data$ID)
Activit_Data_Wide = tibble()
id.i = idlist[i]
dat.i = data %>% filter(ID == id.i) %>% select(-ID)
g = factor(dat.i$Day,levels = as.character(unique(dat.i$Day)))
dat.list = split(dat.i, g)
act = tibble()
for ( k in 1: length(dat.list)){
mat = dat.list[[k]]
print(k)
dt=unique(mat$Day)
dte = unique(mat$Date)
if(nrow(mat) != 1440) {
if(mat$Time[nrow(mat)]=="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)),datetime = rep(NA, 1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(new.mat,mat)
}
if(mat$Time[nrow(mat)]!="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)), datetime = rep(NA,1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(mat,new.mat)
}
}
acti = mat
act = rbind(act,acti)
}
rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt)) %>%
group_by(ID,datetime) %>% summarise(Activity = sum(activity,na.rm = T)) %>%
mutate(Date = as_date(datetime),
Day = Date - min(Date) + 1,
Time = substr(datetime,12,19)) %>%
ungroup() %>%
select(ID,Day,Time,Activity,datetime,Date)
idlist = unique(data$ID)
Activit_Data_Wide = tibble()
i = 1
id.i = idlist[i]
dat.i = data %>% filter(ID == id.i) %>% select(-ID)
g = factor(dat.i$Day,levels = as.character(unique(dat.i$Day)))
dat.list = split(dat.i, g)
act = tibble()
for ( k in 1: length(dat.list)){
mat = dat.list[[k]]
print(k)
dt=unique(mat$Day)
dte = unique(mat$Date)
if(nrow(mat) != 1440) {
if(mat$Time[nrow(mat)]=="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)),datetime = rep(NA, 1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(new.mat,mat)
}
if(mat$Time[nrow(mat)]!="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)), datetime = rep(NA,1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(mat,new.mat)
}
}
acti = mat
act = rbind(act,acti)
}
n.day = length(dat.list)
act = as_tibble(matrix(act$Activity,ncol = 1440,byrow = T))
names(act) = c(paste0("MIN",c(1:1440)))
act = act %>% mutate(ID = id.i,
Date = as.character(date.start.i+c(0:(n.day-1))))
View(act)
View(acti)
id.i = idlist[i]
dat.i = data %>% filter(ID == id.i) %>% select(-ID)
g = factor(dat.i$Day,levels = as.character(unique(dat.i$Day)))
dat.list = split(dat.i, g)
act = tibble()
for ( k in 1: length(dat.list)){
mat = dat.list[[k]]
print(k)
dt=unique(mat$Day)
dte = unique(mat$Date)
if(nrow(mat) != 1440) {
if(mat$Time[nrow(mat)]=="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)),datetime = rep(NA, 1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(new.mat,mat)
}
if(mat$Time[nrow(mat)]!="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)), datetime = rep(NA,1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(mat,new.mat)
}
}
acti = mat
act = rbind(act,acti)
}
View(act)
1440 * 8
n.day = length(dat.list)
act = as_tibble(matrix(act$Activity,ncol = 1440,byrow = T))
names(act) = c(paste0("MIN",c(1:1440)))
act = act %>% mutate(ID = id.i,
Date = as.character(min(dat.i$Date+c(0:(n.day-1))))
act$Seq = (1:nrow(act))
id.i = idlist[i]
dat.i = data %>% filter(ID == id.i) %>% select(-ID)
g = factor(dat.i$Day,levels = as.character(unique(dat.i$Day)))
dat.list = split(dat.i, g)
act = tibble()
for ( k in 1: length(dat.list)){
mat = dat.list[[k]]
print(k)
dt=unique(mat$Day)
dte = unique(mat$Date)
if(nrow(mat) != 1440) {
if(mat$Time[nrow(mat)]=="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)),datetime = rep(NA, 1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(new.mat,mat)
}
if(mat$Time[nrow(mat)]!="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)), datetime = rep(NA,1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(mat,new.mat)
}
}
acti = mat
act = rbind(act,acti)
}
n.day = length(dat.list)
act = as_tibble(matrix(act$Activity,ncol = 1440,byrow = T))
names(act) = c(paste0("MIN",c(1:1440)))
act = act %>% mutate(ID = id.i,
Date = as.character(min(dat.i$Date+c(0:(n.day-1))))
act$Seq = (1:nrow(act))
id.i = idlist[i]
dat.i = data %>% filter(ID == id.i) %>% select(-ID)
g = factor(dat.i$Day,levels = as.character(unique(dat.i$Day)))
dat.list = split(dat.i, g)
act = tibble()
for ( k in 1: length(dat.list)){
mat = dat.list[[k]]
print(k)
dt=unique(mat$Day)
dte = unique(mat$Date)
if(nrow(mat) != 1440) {
if(mat$Time[nrow(mat)]=="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)),datetime = rep(NA, 1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(new.mat,mat)
}
if(mat$Time[nrow(mat)]!="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)), datetime = rep(NA,1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(mat,new.mat)
}
}
acti = mat
act = rbind(act,acti)
}
n.day = length(dat.list)
act = as_tibble(matrix(act$Activity,ncol = 1440,byrow = T))
names(act) = c(paste0("MIN",c(1:1440)))
act = act %>% mutate(ID = id.i,
Date = as.character(min(dat.i$Date+c(0:(n.day-1)))))
act$Seq = (1:nrow(act))
act = act[,c(1441:1443,1:1440)]
id.i = idlist[i]
dat.i = data %>% filter(ID == id.i) %>% select(-ID)
g = factor(dat.i$Day,levels = as.character(unique(dat.i$Day)))
dat.list = split(dat.i, g)
act = tibble()
for ( k in 1: length(dat.list)){
mat = dat.list[[k]]
print(k)
dt=unique(mat$Day)
dte = unique(mat$Date)
if(nrow(mat) != 1440) {
if(mat$Time[nrow(mat)]=="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)),datetime = rep(NA, 1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(new.mat,mat)
}
if(mat$Time[nrow(mat)]!="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)), datetime = rep(NA,1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(mat,new.mat)
}
}
acti = mat
act = rbind(act,acti)
}
n.day = length(dat.list)
act = as_tibble(matrix(act$Activity,ncol = 1440,byrow = T))
names(act) = c(paste0("MIN",c(1:1440)))
act = act %>% mutate(ID = id.i,
Date = as.character(min(dat.i$Date)+c(0:(n.day-1))))
act$Seq = (1:nrow(act))
act = act[,c(1441:1443,1:1440)]
View(act)
rm(list = ls())
library(tidyverse)
library(lubridate)
library(readr)
data = read_csv("~/Downloads/sample data.csv") %>% select(ID,epochdt,activity) %>%
mutate(datetime = mdy_hm(epochdt)) %>%
group_by(ID,datetime) %>% summarise(Activity = sum(activity,na.rm = T)) %>%
mutate(Date = as_date(datetime),
Day = Date - min(Date) + 1,
Time = substr(datetime,12,19)) %>%
ungroup() %>%
select(ID,Day,Time,Activity,datetime,Date)
idlist = unique(data$ID)
Activit_Data_Wide = tibble()
for(i in 1:length(idlist)){
id.i = idlist[i]
dat.i = data %>% filter(ID == id.i) %>% select(-ID)
g = factor(dat.i$Day,levels = as.character(unique(dat.i$Day)))
dat.list = split(dat.i, g)
act = tibble()
for ( k in 1: length(dat.list)){
mat = dat.list[[k]]
print(k)
dt=unique(mat$Day)
dte = unique(mat$Date)
if(nrow(mat) != 1440) {
if(mat$Time[nrow(mat)]=="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)),datetime = rep(NA, 1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(new.mat,mat)
}
if(mat$Time[nrow(mat)]!="23:59:00"){
new.mat = tibble(Day = rep(dt,1440-nrow(mat)),Time = character(1440-nrow(mat)),
Activity=rep(NA,1440-nrow(mat)), datetime = rep(NA,1440-nrow(mat)),
Date = rep(dte,1440-nrow(mat)))
mat = rbind(mat,new.mat)
}
}
acti = mat
act = rbind(act,acti)
}
n.day = length(dat.list)
act = as_tibble(matrix(act$Activity,ncol = 1440,byrow = T))
names(act) = c(paste0("MIN",c(1:1440)))
act = act %>% mutate(ID = id.i,
Date = as.character(min(dat.i$Date)+c(0:(n.day-1))))
act$Seq = (1:nrow(act))
act = act[,c(1441:1443,1:1440)]
Activit_Data_Wide = rbind(Activit_Data_Wide,act)
}
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("~/Dropbox/web/junruidi.github.io/")
#render your sweet site.
rmarkdown::render_site()
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("~/Dropbox/web/junruidi.github.io/")
# setwd("D:/Dropbox/web/junruidi.github.io/")
#render your sweet site.
rmarkdown::render_site()
# git add -A
install.packages(c("cli", "dplyr", "generics", "glue", "keras", "magrittr", "pillar", "randomForest", "readr", "reticulate", "rlang", "rpart", "tensorflow", "yaml"))
y
